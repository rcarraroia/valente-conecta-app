{
  "name": "Pre-diagnostico Valente",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "multiagente-ia-diagnostico",
        "options": {}
      },
      "id": "8340a992-3a33-41dc-b684-39496ee26b44",
      "name": "Webhook Entrada",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -1504,
        864
      ],
      "webhookId": "481b7146-40f7-4d47-a145-83cdb9598892"
    },
    {
      "parameters": {
        "fields": {
          "values": [
            {
              "stringValue": "={{ $json.chatInput }}"
            }
          ]
        },
        "options": {}
      },
      "id": "8a219856-16b6-492b-b993-295bc0344816",
      "name": "Validar Dados",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3,
      "position": [
        -1216,
        864
      ]
    },
    {
      "parameters": {
        "mode": "combine",
        "mergeByFields": {
          "values": [
            {}
          ]
        },
        "options": {}
      },
      "id": "85987ba8-c8a1-4c80-b203-341a3e23614e",
      "name": "Consolidar Resultados IA",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [
        -1152,
        448
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "81ce7ff1-aae0-40f4-8f0e-b5fb272e15af",
      "name": "Processar Respostas IA",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3,
      "position": [
        -96,
        864
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ JSON.parse($json.choices[0].message.content) }}",
        "options": {}
      },
      "id": "04b0083a-0ccb-43e9-8ea1-c133349cfaa4",
      "name": "Resposta Final IA",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        816,
        864
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": " 'Voc√™ √© um integrador de an√°lises m√©dicas especializado em neurodesenvolvimento. Receba os resultados dos 4 sub-agentes especializados (TEA, TDAH, Linguagem, S√≠ndromes) e gere um relat√≥rio final em portugu√™s brasileiro, emp√°tico e acess√≠vel para pais. SEMPRE inclua aviso de que N√ÉO √© diagn√≥stico m√©dico. Determine o n√≠vel de urg√™ncia baseado nas pontua√ß√µes. Responda APENAS em JSON v√°lido com: {\"resumo_analise\": \"texto explicativo\", \"possiveis_sinais\": [{\"categoria\": \"nome\", \"sinais\": [\"lista\"]}], \"orientacoes_personalizadas\": [\"lista de orienta√ß√µes\"], \"proximos_passos\": [\"lista de pr√≥ximos passos\"], \"nivel_urgencia\": \"Alta/Moderada/Baixa\", \"aviso_nao_substituicao\": \"Este relat√≥rio √© uma ferramenta de orienta√ß√£o inicial e N√ÉO substitui a avalia√ß√£o de profissionais qualificados.\", \"timestamp\": \"data atual\", \"session_id\": \"id da sess√£o\"}'\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        464,
        864
      ],
      "id": "d1596045-d06c-4e8d-97ca-338d91160804",
      "name": "Gerar Relat√≥rio Final (IA)1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        448,
        1088
      ],
      "id": "b368d1f6-88c2-4b5b-b746-8ca661e8a588",
      "name": "Groq Chat Model4",
      "credentials": {
        "groqApi": {
          "id": "5mYavsl7URPRFfVG",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "toolDescription": "Especialista em s√≠ndromes gen√©ticas e cromoss√¥micas, respons√°vel por analisar sinais relacionados a hist√≥rico familiar, malforma√ß√µes, atraso global e m√∫ltiplas √°reas afetadas. Sua fun√ß√£o √© identificar ind√≠cios que possam apontar para condi√ß√µes sindr√¥micas e orientar encaminhamentos iniciais, como avalia√ß√£o gen√©tica ou multidisciplinar.",
        "text": "Voc√™ √© um especialista em s√≠ndromes gen√©ticas e cromoss√¥micas.\nSua fun√ß√£o √© analisar os dados fornecidos sobre a crian√ßa e identificar sinais que possam indicar a presen√ßa de s√≠ndromes.\n\nO que voc√™ deve considerar na an√°lise:\n\nHist√≥rico familiar\n\nPresen√ßa de malforma√ß√µes\n\nAtraso global no desenvolvimento\n\nImpactos em m√∫ltiplas √°reas (motor, cognitivo, linguagem, social)\n\nComo deve ser a resposta:\n\nClassifique a categoria como ‚ÄúS√≠ndromes‚Äù\n\nAtribua uma pontua√ß√£o de 0 a 10 (quanto maior, mais sinais presentes)\n\nIndique o n√≠vel de risco: Alto, Moderado ou Baixo\n\nListe os sinais identificados em linguagem simples\n\nForne√ßa uma lista de recomenda√ß√µes espec√≠ficas (ex.: procurar geneticista, exames complementares, acompanhamento multidisciplinar)\n\nInclua um √≠ndice de confian√ßa entre 0.0 e 1.0\n\nA resposta deve estar organizada em formato JSON v√°lido para integra√ß√£o posterior.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        -992,
        1088
      ],
      "id": "a1fa1cf8-7bd7-4afd-b816-bf6fd6ee25ab",
      "name": "Sub-Agente S√≠ndromes (IA)"
    },
    {
      "parameters": {
        "toolDescription": "Especialista em Transtornos de Linguagem e Comunica√ß√£o, analisa aspectos como desenvolvimento da fala, vocabul√°rio, compreens√£o, articula√ß√£o e flu√™ncia. O foco √© identificar dificuldades de comunica√ß√£o que possam impactar no desenvolvimento escolar e social, recomendando avalia√ß√£o fonoaudiol√≥gica e estrat√©gias de est√≠mulo.",
        "text": "Voc√™ √© um especialista em Transtornos de Linguagem e Comunica√ß√£o.\nSua fun√ß√£o √© analisar os dados fornecidos sobre a crian√ßa e identificar poss√≠veis problemas de linguagem.\n\nO que voc√™ deve considerar na an√°lise:\n\nDesenvolvimento da fala (idade de in√≠cio, clareza, progress√£o)\n\nVocabul√°rio (variedade e adequa√ß√£o)\n\nCompreens√£o (capacidade de entender instru√ß√µes e perguntas)\n\nArticula√ß√£o (clareza ao pronunciar palavras e sons)\n\nFlu√™ncia (ritmo e continuidade da fala)\n\nComo deve ser a resposta:\n\nDefina a categoria como ‚ÄúLinguagem‚Äù\n\nAtribua uma pontua√ß√£o de 0 a 10 (quanto maior, mais sinais foram identificados)\n\nIndique o n√≠vel de risco: Alto, Moderado ou Baixo\n\nListe os sinais observados de forma clara e acess√≠vel\n\nForne√ßa uma lista de recomenda√ß√µes iniciais (ex.: avalia√ß√£o com fonoaudi√≥logo, est√≠mulo de leitura, acompanhamento pedag√≥gico)\n\nInclua um √≠ndice de confian√ßa entre 0.0 e 1.0\n\nA resposta deve ser entregue em JSON v√°lido, organizado conforme os campos especificados, para integra√ß√£o no relat√≥rio final.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        -704,
        1088
      ],
      "id": "39a18925-4d2c-4305-a34d-17f4ce671ba8",
      "name": "Sub-Agente Linguagem (IA)2"
    },
    {
      "parameters": {
        "toolDescription": "Especialista em Transtorno do D√©ficit de Aten√ß√£o e Hiperatividade (TDAH), avalia sinais de desaten√ß√£o, hiperatividade, impulsividade e coordena√ß√£o motora. Busca identificar padr√µes que possam indicar TDAH e orientar sobre acompanhamento neuropedi√°trico, psicol√≥gico e suporte escolar.",
        "text": "=Voc√™ √© um especialista em Transtorno do D√©ficit de Aten√ß√£o e Hiperatividade (TDAH).\nSua fun√ß√£o √© analisar os dados fornecidos sobre a crian√ßa e identificar poss√≠veis sinais de TDAH.\n\nO que voc√™ deve considerar na an√°lise:\n\nAten√ß√£o (n√≠vel de concentra√ß√£o, facilidade de distra√ß√£o, manuten√ß√£o em tarefas)\n\nHiperatividade (inquieta√ß√£o, agita√ß√£o, dificuldade em permanecer parado)\n\nImpulsividade (respostas precipitadas, dificuldade em esperar, comportamentos arriscados)\n\nCoordena√ß√£o motora (atrasos ou dificuldades que possam estar relacionados ao quadro)\n\nComo deve ser a resposta:\n\nDefina a categoria como ‚ÄúTDAH‚Äù\n\nAtribua uma pontua√ß√£o de 0 a 10 (quanto maior, mais sinais foram identificados)\n\nIndique o n√≠vel de risco: Alto, Moderado ou Baixo\n\nListe os sinais observados de forma clara e compreens√≠vel\n\nForne√ßa uma lista de recomenda√ß√µes iniciais (ex.: avalia√ß√£o com neuropediatra ou psic√≥logo, estrat√©gias de apoio escolar, acompanhamento multidisciplinar)\n\nInclua um √≠ndice de confian√ßa entre 0.0 e 1.0\n\nA resposta deve ser entregue em JSON v√°lido, estruturado conforme os campos definidos, para integra√ß√£o posterior ao relat√≥rio final.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        -416,
        1088
      ],
      "id": "ab89ab47-5314-4f58-b2e0-05d63f797248",
      "name": "Sub-Agente TDAH (IA)"
    },
    {
      "parameters": {
        "toolDescription": "Especialista em Transtorno do Espectro Autista (TEA), foca na an√°lise de intera√ß√£o social, comunica√ß√£o verbal e n√£o verbal, presen√ßa de comportamentos repetitivos e sensibilidades sensoriais. Seu objetivo √© detectar poss√≠veis sinais de autismo e orientar sobre a import√¢ncia da avalia√ß√£o profissional precoce.",
        "text": "Voc√™ √© um especialista em Transtorno do Espectro Autista (TEA).\nSua fun√ß√£o √© analisar os dados fornecidos sobre a crian√ßa e identificar poss√≠veis sinais relacionados ao TEA.\n\nO que voc√™ deve considerar na an√°lise:\n\nIntera√ß√£o social (respostas a outras pessoas, interesse em brincar, contato visual)\n\nComunica√ß√£o (fala, compreens√£o, uso da linguagem verbal ou n√£o verbal)\n\nComportamentos repetitivos ou padr√µes restritos de interesse\n\nSensibilidades sensoriais (hiper ou hipo sensibilidade a sons, luzes, texturas, etc.)\n\nComo deve ser a resposta:\n\nDefina a categoria como ‚ÄúTEA‚Äù\n\nAtribua uma pontua√ß√£o de 0 a 10 (quanto maior, mais sinais foram identificados)\n\nIndique o n√≠vel de risco: Alto, Moderado ou Baixo\n\nListe os sinais observados de forma clara e acess√≠vel\n\nForne√ßa uma lista de recomenda√ß√µes iniciais (ex.: procurar neuropediatra, iniciar avalia√ß√£o multidisciplinar, acompanhamento de fonoaudi√≥logo)\n\nInclua um √≠ndice de confian√ßa entre 0.0 e 1.0\n\nA resposta deve ser entregue em JSON v√°lido, organizado conforme os campos especificados, para que possa ser integrado ao relat√≥rio final.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agentTool",
      "typeVersion": 2.2,
      "position": [
        -128,
        1088
      ],
      "id": "25bc4fa7-f62d-4e66-8a56-880b4e6f50e1",
      "name": "Sub-Agente TEA (IA)"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        -976,
        1296
      ],
      "id": "05da823d-dae6-4da0-850b-61ea0e499e85",
      "name": "Groq",
      "credentials": {
        "groqApi": {
          "id": "5mYavsl7URPRFfVG",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        -704,
        1296
      ],
      "id": "19c6a0c2-5a42-49b5-b683-c21d4ca4539d",
      "name": "Groq1",
      "credentials": {
        "groqApi": {
          "id": "5mYavsl7URPRFfVG",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        -416,
        1296
      ],
      "id": "d4ca63cc-6cb5-49fd-a05b-567ee2061a8a",
      "name": "Groq2",
      "credentials": {
        "groqApi": {
          "id": "5mYavsl7URPRFfVG",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        -128,
        1296
      ],
      "id": "b5d7b969-0422-4cfd-9d45-af2ccd24229d",
      "name": "Groq3",
      "credentials": {
        "groqApi": {
          "id": "5mYavsl7URPRFfVG",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -832,
        1296
      ],
      "id": "11ba9c2c-7b3e-434d-8231-7039c9796eb7",
      "name": "Mem√≥ria"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -544,
        1296
      ],
      "id": "091ae0de-83b8-4de8-8360-8bfb7c6c898d",
      "name": "Mem√≥ria2"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -256,
        1296
      ],
      "id": "73ecf81a-569d-45c0-8352-061d8d5160ce",
      "name": "Mem√≥ria1"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        16,
        1296
      ],
      "id": "e513810f-93a1-475f-8191-a7da5ec69687",
      "name": "Mem√≥ria3"
    },
    {
      "parameters": {
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -1120,
        1088
      ],
      "id": "522718c4-d734-42a9-9d66-669423503b9b",
      "name": "Mem√≥ria4"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        -1248,
        1088
      ],
      "id": "b85bb844-2f36-4587-bc0f-b7b21f4e9979",
      "name": "Groq4",
      "credentials": {
        "groqApi": {
          "id": "5mYavsl7URPRFfVG",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        560,
        1088
      ],
      "id": "1db67f3b-5943-47da-9840-3c7e61dc336b",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=\n\n",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "Voc√™ √© um agente orquestrador respons√°vel por iniciar e conduzir uma entrevista de pr√©-diagn√≥stico sobre desenvolvimento infantil. \nSua fun√ß√£o √© acolher a fam√≠lia com empatia, explicar claramente o processo e coletar informa√ß√µes de forma √©tica e profissional. \n\n- Sempre use linguagem acess√≠vel, calma e respeitosa.  \n- Valide as respostas e encoraje os pais durante a conversa.  \n- N√£o antecipe diagn√≥sticos. Sua fun√ß√£o √© apenas conduzir a coleta de informa√ß√µes.  \n- Utilize os sub-agentes especializados (TEA, TDAH, Linguagem, S√≠ndromes) para formular perguntas espec√≠ficas de cada etapa do question√°rio.  \n\n## üîÑ Fluxo da Entrevista\n1. In√≠cio ‚Üí Sauda√ß√£o calorosa + explica√ß√£o do processo.\n2. Consentimento ‚Üí Perguntar se a fam√≠lia autoriza a coleta das informa√ß√µes.\n3. Idade ‚Üí Registrar a idade da crian√ßa.\n4. Desenvolvimento Motor ‚Üí Perguntar sobre coordena√ß√£o e movimentos.\n5. Linguagem ‚Üí Perguntar sobre comunica√ß√£o e fala.\n6. Comportamento Social ‚Üí Perguntar sobre intera√ß√µes sociais e brincadeiras.\n7. Comportamento Emocional ‚Üí Perguntar sobre regula√ß√£o emocional e rotina.\n8. Hist√≥rico M√©dico ‚Üí Perguntar sobre informa√ß√µes m√©dicas relevantes.\n9. An√°lise ‚Üí Enviar as informa√ß√µes aos sub-agentes especializados.\n10. Resultado ‚Üí Preparar um relat√≥rio conversacional resumido para o usu√°rio.\n\n## üéØ Estilo da Conversa\n- Tom emp√°tico, acolhedor e claro.\n- Emojis podem ser usados para humanizar a experi√™ncia.\n- Valida√ß√£o inteligente: confirmar idade num√©rica, garantir que houve consentimento, orientar em caso de respostas inv√°lidas.\n- Mostrar progresso de forma clara: etapas conclu√≠das / total.\n‚ÄúQuando chamar os sub-agentes, envie apenas os dados coletados do usu√°rio (dadosValidados) sem adicionar argumentos extras.‚Äù\n\n‚ö†Ô∏è Importante: Sempre lembre o usu√°rio de que este √© um **apoio inicial**, n√£o um diagn√≥stico m√©dico, e que apenas profissionais de sa√∫de podem dar diagn√≥sticos definitivos."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -848,
        864
      ],
      "id": "940d7aa7-bc21-43ee-9ff4-b3c5ed4e2d55",
      "name": "Agente Orquestador"
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook Entrada": {
      "main": [
        [
          {
            "node": "Validar Dados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Validar Dados": {
      "main": [
        [
          {
            "node": "Agente Orquestador",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Consolidar Resultados IA": {
      "main": [
        []
      ]
    },
    "Processar Respostas IA": {
      "main": [
        [
          {
            "node": "Gerar Relat√≥rio Final (IA)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Gerar Relat√≥rio Final (IA)1": {
      "main": [
        [
          {
            "node": "Resposta Final IA",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Groq Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Gerar Relat√≥rio Final (IA)1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Sub-Agente S√≠ndromes (IA)": {
      "ai_tool": [
        [
          {
            "node": "Agente Orquestador",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Sub-Agente Linguagem (IA)2": {
      "ai_tool": [
        [
          {
            "node": "Agente Orquestador",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Sub-Agente TDAH (IA)": {
      "ai_tool": [
        [
          {
            "node": "Agente Orquestador",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Sub-Agente TEA (IA)": {
      "ai_tool": [
        [
          {
            "node": "Agente Orquestador",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Groq": {
      "ai_languageModel": [
        [
          {
            "node": "Sub-Agente S√≠ndromes (IA)",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Groq1": {
      "ai_languageModel": [
        [
          {
            "node": "Sub-Agente Linguagem (IA)2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Groq2": {
      "ai_languageModel": [
        [
          {
            "node": "Sub-Agente TDAH (IA)",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Groq3": {
      "ai_languageModel": [
        [
          {
            "node": "Sub-Agente TEA (IA)",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Mem√≥ria": {
      "ai_memory": [
        [
          {
            "node": "Sub-Agente S√≠ndromes (IA)",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Mem√≥ria2": {
      "ai_memory": [
        [
          {
            "node": "Sub-Agente Linguagem (IA)2",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Mem√≥ria1": {
      "ai_memory": [
        [
          {
            "node": "Sub-Agente TDAH (IA)",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Mem√≥ria3": {
      "ai_memory": [
        [
          {
            "node": "Sub-Agente TEA (IA)",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Mem√≥ria4": {
      "ai_memory": [
        [
          {
            "node": "Agente Orquestador",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Groq4": {
      "ai_languageModel": [
        [
          {
            "node": "Agente Orquestador",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "Gerar Relat√≥rio Final (IA)1",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Agente Orquestador": {
      "main": [
        [
          {
            "node": "Processar Respostas IA",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "a57af485-3487-460e-bdca-a7493528f62a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "e62c39f25f813738aa864e24e98c7fd8148c62b266853302d2f07d4bb6a289fe"
  },
  "id": "B5gVheqycaRYjzYu",
  "tags": []
}